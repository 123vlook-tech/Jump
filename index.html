<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跳转到我的网站</title>
    <link rel="stylesheet" href="src/css/base.css">
    <link rel="stylesheet" href="src/css/particles.css">
    <link rel="stylesheet" href="src/css/overlay.css">
    <link rel="stylesheet" href="src/css/responsive.css">
    <link rel="stylesheet" href="src/css/themes.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body.deepsea-theme {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%) !important;
            margin: 0;
            font-family: "Segoe UI", Arial, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
        }
        h1 { font-size: 2em; text-align: center; }
        .countdown { font-size: 2em; text-align: center; margin: 10px 0; }
        .message { text-align: center; font-size: 1.2em; margin: 10px 0; }
        .loading-dots .dot { display: inline-block; width: 6px; height: 6px; margin: 0 2px; background: #fff; border-radius: 50%; animation: blink 1s infinite; }
        .loading-dots .dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes blink { 0%, 80%, 100% { opacity: 0; } 40% { opacity: 1; } }
        .progress-container { width: 100%; background: #ccc; height: 5px; margin-top: 10px; }
        .progress-bar { width: 0; height: 5px; background: #667eea; transition: width 0.3s; }
        .footer { text-align: center; margin-top: 15px; font-size: 0.9em; color: #fff; }

        /* 微信/QQ遮罩层 */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        .guide-box {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
        .browser-icons { display: flex; justify-content: space-around; margin: 10px 0; }
        .guide-btn { padding: 6px 12px; margin-top: 10px; cursor: pointer; }
        @media(min-width:768px) {
            h1 { font-size: 2.5em; }
            .countdown { font-size: 2.5em; }
            .message { font-size: 1.5em; }
        }
    </style>
</head>
<body class="deepsea-theme">
    <!-- 微信/QQ浏览器引导遮罩层 -->
    <div class="overlay" id="browserOverlay">
        <div class="guide-box">
            <div class="guide-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <h2>请在浏览器中打开</h2>
            <p>检测到您正在使用微信或QQ内置浏览器访问，请点击右上角菜单选择"在浏览器中打开"。</p>
            <div class="browser-icons">
                <div><i class="fab fa-chrome"></i><span>Chrome</span></div>
                <div><i class="fab fa-safari"></i><span>Safari</span></div>
                <div><i class="fab fa-firefox"></i><span>Firefox</span></div>
                <div><i class="fab fa-edge"></i><span>Edge</span></div>
            </div>
            <button class="guide-btn" id="copyUrlBtn">复制链接地址</button>
        </div>
    </div>

    <main class="main-content">
        <div class="background-animation" id="particles"></div>
        <div class="container">
            <h1>即将跳转到我的网站</h1>
            <div class="countdown" id="countdown">5</div>
            <div class="message">
                正在为您准备跳转页面
                <span class="loading-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>
                <span class="target-url" id="targetUrl">https://ajs.aijiasu.life/#/login</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
            <div class="footer">安全跳转 · 请勿关闭此页面</div>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countdownEl = document.getElementById("countdown");
            const targetEl = document.getElementById("targetUrl");
            const progressBar = document.querySelector(".progress-bar");
            const browserOverlay = document.getElementById("browserOverlay");
            const copyBtn = document.getElementById("copyUrlBtn");
            const targetUrl = targetEl.innerText.trim();
            let countdown = parseInt(countdownEl.innerText) || 5;

            // 检测微信/QQ浏览器
            const ua = navigator.userAgent;
            if(/MicroMessenger|QQ\//i.test(ua)){
                browserOverlay.style.display = "flex";
            }

            // 复制链接
            copyBtn.addEventListener("click", () => {
                navigator.clipboard.writeText(targetUrl).then(() => {
                    alert("链接已复制，可在浏览器打开！");
                }).catch(() => {
                    alert("复制失败，请手动复制链接。");
                });
            });

            // 倒计时和进度条
            const timer = setInterval(() => {
                countdown--;
                countdownEl.innerText = countdown;
                progressBar.style.width = ((5 - countdown)/5*100) + "%";
                if(countdown <= 0){
                    clearInterval(timer);
                    window.location.href = targetUrl;
                }
            }, 1000);
        });
    </script>
</body>
</html>
