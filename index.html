<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <title>跳转到我的网站</title>
    <!-- 默认样式 -->
    <link rel="stylesheet" href="src/css/base.css" id="base-css">
    <link rel="stylesheet" href="src/css/particles.css" id="particles-css">
    <link rel="stylesheet" href="src/css/overlay.css" id="overlay-css">
    <link rel="stylesheet" href="src/css/responsive.css" id="responsive-css">
    <link rel="stylesheet" href="src/css/themes.css" id="themes-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* 预加载默认主题背景，避免页面加载时背景变白 */
        body.deepsea-theme {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%) !important;
        }
        .progress-bar {
            width: 0;
            height: 5px;
            background: #667eea;
            transition: width 0.3s;
        }
        .progress-container {
            width: 100%;
            background: #ccc;
            margin-top: 10px;
        }
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        .guide-box {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            width: 300px;
        }
        .browser-icons {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
        }
        .guide-btn {
            padding: 6px 12px;
            margin-top: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body class="deepsea-theme">
    <!-- 微信/QQ浏览器引导遮罩层 -->
    <div class="overlay" id="browserOverlay" role="dialog" aria-labelledby="guideTitle" aria-describedby="guideText">
        <div class="guide-box">
            <div class="guide-icon">
                <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
            </div>
            <h2 class="guide-title" id="guideTitle">请在浏览器中打开</h2>
            <p class="guide-text" id="guideText">
                检测到您正在使用微信或QQ内置浏览器访问，为了获得最佳体验，请点击右上角菜单，选择"在浏览器中打开"。
            </p>
            <div class="browser-icons">
                <div class="browser-icon">
                    <i class="fab fa-chrome" aria-hidden="true"></i>
                    <span>Chrome</span>
                </div>
                <div class="browser-icon">
                    <i class="fab fa-safari" aria-hidden="true"></i>
                    <span>Safari</span>
                </div>
                <div class="browser-icon">
                    <i class="fab fa-firefox" aria-hidden="true"></i>
                    <span>Firefox</span>
                </div>
                <div class="browser-icon">
                    <i class="fab fa-edge" aria-hidden="true"></i>
                    <span>Edge</span>
                </div>
            </div>
            <button class="guide-btn" id="copyUrlBtn">复制链接地址</button>
        </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
        <div class="background-animation" id="particles" aria-hidden="true"></div>
        <div class="container">
            <h1>即将跳转到我的网站</h1>
            <div class="countdown" id="countdown" role="timer" aria-live="polite">5</div>
            <div class="message">
                正在为您准备跳转页面
                <span class="loading-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>
                <span class="target-url" id="targetUrl">https://ajs.aijiasu.life/#/login</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
            <div class="footer">安全跳转 · 请勿关闭此页面</div>
            <div id="customFooter"></div>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const countdownEl = document.getElementById("countdown");
            const targetEl = document.getElementById("targetUrl");
            const progressBar = document.querySelector(".progress-bar");
            const browserOverlay = document.getElementById("browserOverlay");
            const copyBtn = document.getElementById("copyUrlBtn");

            const targetUrl = targetEl.innerText.trim();
            let countdown = parseInt(countdownEl.innerText) || 5;

            // 检测微信/QQ浏览器
            const ua = navigator.userAgent;
            const isWxQqBrowser = /MicroMessenger|QQ\//i.test(ua);
            if (isWxQqBrowser) {
                browserOverlay.style.display = "flex";
            }

            // 复制链接
            copyBtn.addEventListener("click", () => {
                navigator.clipboard.writeText(targetUrl).then(() => {
                    alert("链接已复制，可在浏览器打开！");
                }).catch(() => {
                    alert("复制失败，请手动复制链接。");
                });
            });

            // 倒计时和进度条
            const timer = setInterval(() => {
                countdown--;
                countdownEl.innerText = countdown;

                const progress = ((5 - countdown) / 5) * 100;
                progressBar.style.width = `${progress}%`;

                if (countdown <= 0) {
                    clearInterval(timer);
                    window.location.href = targetUrl;
                }
            }, 1000);
        });
    </script>
</body>
</html>
